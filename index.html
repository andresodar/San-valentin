<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para mi personita favorita ‚ù§Ô∏è</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #ff4d6d; --secondary: #ff8fa3; --bg: #fff0f3; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background-color: var(--bg); font-family: 'Quicksand', sans-serif; overflow-x: hidden; text-align: center; color: #333; scroll-behavior: smooth; }
        
        #hearts-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; }
        .heart-float { position: absolute; color: var(--secondary); opacity: 0.6; animation: float 6s linear infinite; }
        @keyframes float { 0% { transform: translateY(100vh) scale(0); } 100% { transform: translateY(-10vh) scale(1.5); opacity: 0; } }

        .section { min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 20px; display: none; }
        .active { display: flex !important; }

        /* SOBRE M√ÅGICO */
        .envelope-wrapper { cursor: pointer; transform-style: preserve-3d; transition: 0.5s; }
        .envelope { width: 280px; height: 180px; background: #f08080; position: relative; border-radius: 0 0 10px 10px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        .envelope::before { content: ''; position: absolute; top: -140px; border-left: 140px solid transparent; border-right: 140px solid transparent; border-bottom: 140px solid #f08080; }
        
        /* PARALAJE EN FOTOS */
        .parallax-wrap { perspective: 1000px; margin: 20px; }
        .polaroid { 
            background: white; padding: 10px 10px 30px 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); 
            width: 220px; transition: transform 0.1s ease-out; transform-style: preserve-3d;
        }
        .polaroid img { width: 100%; height: 200px; object-fit: cover; pointer-events: none; }

        /* L√çNEA DE TIEMPO */
        .timeline { border-left: 3px dashed var(--primary); margin: 30px 0; padding-left: 20px; text-align: left; max-width: 300px; }
        .timeline-item { position: relative; margin-bottom: 25px; }
        .timeline-item::before { content: '‚ù§Ô∏è'; position: absolute; left: -33px; background: var(--bg); }

        /* MENSAJE OCULTO */
        .secret-input { padding: 10px; border-radius: 10px; border: 2px solid var(--primary); text-align: center; width: 100px; font-size: 1.2rem; }
        #hidden-content { display: none; background: #fff; padding: 20px; border-radius: 20px; border: 3px double var(--primary); margin-top: 20px; }

        .card { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); max-width: 600px; width: 100%; }
        button { background: var(--primary); color: white; border: none; padding: 12px 25px; border-radius: 50px; cursor: pointer; font-weight: bold; margin: 10px; }
        .coupon { border: 2px dashed var(--primary); padding: 10px; border-radius: 10px; cursor: pointer; margin: 5px; display: inline-block; width: 45%; }
    </style>
</head>
<body>

    <div id="hearts-container"></div>
    <audio id="musica" loop><source src="musica.mp3" type="audio/mpeg"></audio>

    <div id="fase0" class="section active">
        <h1>Una carta para mi ni√±a... üíå</h1>
        <div class="envelope-wrapper" onclick="abrirSobre()">
            <div class="envelope"><div style="font-size: 50px; padding-top: 40px;">‚ù§Ô∏è</div></div>
        </div>
    </div>

    <div id="fase1" class="section">
        <div class="card">
            <h1>Nuestro Tiempo Juntos ‚ù§Ô∏è</h1>
            <div id="contador" style="font-size: 1.5rem; color: var(--primary); margin: 20px 0;"></div>
            
            <h3>Nuestra Historia:</h3>
            <div class="timeline">
                <div class="timeline-item"><b>D√≠a 1:</b> El primer "Hola" que cambi√≥ todo.</div>
                <div class="timeline-item"><b>Cita 1:</b> Donde supe que eras t√∫.</div>
                <div class="timeline-item"><b>Hoy:</b> El mejor San Valent√≠n de mi vida.</div>
            </div>
            <button onclick="irFase(2)">¬°Siguiente! üòç</button>
        </div>
    </div>

    <div id="fase2" class="section">
        <div class="card">
            <h1>¬øCu√°nto nos conocemos? üß©</h1>
            <p id="pregunta-texto">¬øCu√°l es mi parte favorita de ti?</p>
            <div id="opciones">
                <button onclick="verificar(true)">Tu sonrisa y tus ojos</button>
                <button onclick="verificar(true)">Todo t√∫</button>
                <button onclick="verificar(true)">Tu forma de ser</button>
            </div>
        </div>
    </div>

    <div id="fase3" class="section">
        <div class="card">
            <h1>¬°Para la novia m√°s linda! ‚ù§Ô∏è</h1>
            <p id="typing-text" style="font-style: italic;"></p>

            <div style="display: flex; justify-content: center; flex-wrap: wrap;">
                <div class="parallax-wrap"><div class="polaroid" onmousemove="parallax(event, this)"><img src="foto1.jpg"><p>T√∫ y yo</p></div></div>
                <div class="parallax-wrap"><div class="polaroid" onmousemove="parallax(event, this)"><img src="foto2.jpg"><p>Mi amor</p></div></div>
            </div>

            <div style="background: #fff5f7; padding: 20px; border-radius: 15px; margin: 20px 0;">
                <h3>üçØ Frasco de Razones</h3>
                <p id="razon-texto">Haz clic abajo...</p>
                <button onclick="nuevaRazon()">Sacar papelito üìú</button>
            </div>

            <h3>Tus Vales Especiales üéüÔ∏è</h3>
            <div class="coupon" onclick="canjear('Helado')">üç¶ Vale Helado</div>
            <div class="coupon" onclick="canjear('Cena')">üçï Vale Cena</div>

            <div style="margin-top: 40px;">
                <p>¬øTienes el c√≥digo secreto? üîí</p>
                <input type="password" id="secretCode" class="secret-input" placeholder="0000" onkeyup="checkSecret()">
                <div id="hidden-content">
                    <h4>üíñ MENSAJE SECRETO üíñ</h4>
                    <p>Eres el amor de mi vida. Gracias por decir que s√≠. Prometo cuidarte siempre.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const fechaInicio = new Date('2025-06-31T00:00:00'); // <--- CAMBIA TU FECHA AQU√ç
        const razones = ["Tu risa", "Tu apoyo", "Tu forma de cuidarme", "Tus besos", "Todo de ti"];

        function actualizarContador() {
            const diff = new Date() - fechaInicio;
            const d = Math.floor(diff / 86400000);
            const h = Math.floor((diff / 3600000) % 24);
            const m = Math.floor((diff / 60000) % 60);
            const s = Math.floor((diff / 1000) % 60);
            document.getElementById('contador').innerText = `${d}d ${h}h ${m}m ${s}s`;
        }
        setInterval(actualizarContador, 1000);

        function abrirSobre() {
            document.getElementById('musica').play();
            confetti();
            irFase(1);
        }

        function irFase(n) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById('fase' + n).classList.add('active');
        }

        function verificar(res) {
            confetti();
            irFase(3);
            escribir();
        }

        function parallax(e, el) {
            const { offsetWidth: width, offsetHeight: height } = el;
            const { offsetX: x, offsetY: y } = e;
            const rotateX = ((y / height) - 0.5) * 20;
            const rotateY = ((x / width) - 0.5) * -20;
            el.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
        }

        function nuevaRazon() {
            document.getElementById('razon-texto').innerText = razones[Math.floor(Math.random()*razones.length)];
            confetti({particleCount: 20});
        }

        function checkSecret() {
            if(document.getElementById('secretCode').value === '0311') { // <--- C√ìDIGO SECRETO
                document.getElementById('hidden-content').style.display = 'block';
                confetti({particleCount: 150});
            }
        }

        function escribir() {
            const texto = "Esta p√°gina es solo para ti. Eres lo m√°s importante de mi mundo. ¬°Feliz San Valent√≠n! ‚ù§Ô∏è";
            let i = 0;
            const dest = document.getElementById("typing-text");
            function type() { if(i < texto.length) { dest.innerHTML += texto.charAt(i); i++; setTimeout(type, 50); } }
            type();
        }

        function canjear(p) { alert("¬°Cup√≥n de " + p + " activado! ‚ù§Ô∏è"); }

        function createHearts() {
            const container = document.getElementById('hearts-container');
            setInterval(() => {
                const h = document.createElement('div');
                h.classList.add('heart-float');
                h.innerHTML = '‚ù§Ô∏è';
                h.style.left = Math.random() * 100 + 'vw';
                container.appendChild(h);
                setTimeout(() => h.remove(), 6000);
            }, 300);
        }
        createHearts();
    </script>
</body>
</html>
